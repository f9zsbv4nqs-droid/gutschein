<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Geburtstagsr√§tsel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; font-family:"Segoe UI",Arial,sans-serif; background:linear-gradient(135deg,#0f2027,#203a43,#2c5364); color:#fff; }
.container { max-width:900px; margin:auto; padding:20px; }
.card { background: rgba(255,255,255,0.08); border-radius:20px; box-shadow:0 20px 40px rgba(0,0,0,0.4); }
.content { padding:20px; text-align:center; }
input { padding:10px; border-radius:8px; border:none; width:90%; max-width:260px; font-size:1rem; }
button { margin-top:15px; padding:12px 28px; font-size:1rem; border:none; border-radius:30px; cursor:pointer; background:#ffd479; color:#1a2a33; font-weight:bold; }
.hidden { display:none; }
.error { color:#ffb3b3; margin-top:10px; }

.highlight { font-size:1.8rem; color:#ffd479; font-weight:bold; }
.voucher-box { border:2px dashed #ffffffaa; border-radius:15px; padding:20px; margin:20px 0; background:rgba(0,0,0,0.25); }

.confetti { position:fixed; top:-10px; width:10px; height:10px; animation:fall 3s linear forwards; z-index:9999; }
@keyframes fall { to { transform:translateY(110vh) rotate(360deg); opacity:0; } }

/* TIC TAC TOE */
#ttt { display:grid; grid-template-columns:repeat(3,90px); gap:10px; justify-content:center; margin:20px auto; }
.cell {
  height:90px; font-size:3rem;
  background:rgba(255,255,255,0.15);
  border-radius:12px;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
}

/* RICHTUNGS-SPIEL */
#grid { display:grid; grid-template-columns:repeat(3,80px); gap:8px; justify-content:center; margin:20px auto; }
.grid-cell { height:80px; background:rgba(255,255,255,0.15); border-radius:12px; }
.active { background:#ffd479; }

/* MEMORY */
#memory { display:grid; grid-template-columns:repeat(3,90px); gap:12px; justify-content:center; margin:20px auto; }
.card-m {
  height:90px; font-size:2rem;
  background:rgba(255,255,255,0.15);
  border-radius:12px;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
}

img.voucher-image { max-width:80%; border-radius:15px; margin-bottom:15px; }
</style>
</head>
<body>
<div class="container"><div class="card"><div class="content">

<!-- WISSEN -->
<div id="riddle">
<h1>üß† Geburtstagsr√§tsel</h1>
<p>üåç Gr√∂√üte Stadt der Welt (nach Einwohnern)?</p><input id="q1"><br><br>
<p>üó∫Ô∏è Gr√∂√üte Stadt der Welt (nach Fl√§che)?</p><input id="q2"><br><br>
<p>‚ò¢Ô∏è Datum des Atombombenabwurfs auf Hiroshima?</p><input id="q3"><br>
<button onclick="checkRiddle()">Antworten pr√ºfen</button>
<div class="error hidden" id="riddleError">‚ùå Leider falsch</div>
</div>

<!-- TIC TAC TOE -->
<div id="game" class="hidden">
<h1>‚≠ï Tic-Tac-Toe</h1>
<p>Du spielst ‚ùå ‚Äì besiege den Computer ‚≠ï</p>
<div id="ttt"></div>
<div class="error hidden" id="gameError"></div>
</div>

<!-- RICHTUNGS-SPIEL -->
<div id="path" class="hidden">
<h1>üß≠ Der richtige Weg</h1>
<p><strong>‚¨ÜÔ∏è ‚û°Ô∏è ‚û°Ô∏è ‚¨áÔ∏è ‚¨ÖÔ∏è</strong></p>
<div id="grid"></div>
<div>
<button onclick="move('up')">‚¨ÜÔ∏è</button>
<button onclick="move('left')">‚¨ÖÔ∏è</button>
<button onclick="move('right')">‚û°Ô∏è</button>
<button onclick="move('down')">‚¨áÔ∏è</button>
</div>
<div class="error hidden" id="pathError">‚ùå Falscher Weg!</div>
</div>

<!-- MEMORY -->
<div id="memoryGame" class="hidden">
<h1>üß† Mini-Memory</h1>
<div id="memory"></div>
</div>

<!-- GUTSCHEIN -->
<div id="unlock" class="hidden">
<button onclick="showVoucher()">üéÅ Gutschein einl√∂sen</button>
</div>

<div id="voucher" class="hidden">
<h1>üéâ Alles Gute zum 50. Geburtstag! üéâ</h1>
<h2>Lieber Papa</h2>
<img src="bild.jpeg" class="voucher-image">
<div class="voucher-box">
<p>Zu deinem Geburtstag bekommst du:</p>
<div class="highlight">üß≥ EINEN NEUEN REISEKOFFER üß≥</div>
</div>
<p>Mit ganz viel Liebe üíô<br><strong>Jonas, Emilia, Emely und Moritz</strong></p>
</div>

</div></div></div>

<script>
// ===================== WISSEN =====================
function n(t){return t.toLowerCase().trim();}
function checkRiddle(){
if(n(q1.value)=="tokio" && n(q2.value)=="chongqing" &&
(n(q3.value)=="6. august 1945" || n(q3.value)=="06.08.1945")){
riddle.classList.add("hidden"); initTTT(); game.classList.remove("hidden");
} else riddleError.classList.remove("hidden");
}

// ===================== TIC TAC TOE =====================
let boardTTT=[], gameOver=false;
const winLines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

function initTTT(){
ttt.innerHTML=""; boardTTT=Array(9).fill(""); gameOver=false;
gameError.classList.add("hidden");
for(let i=0;i<9;i++){
const c=document.createElement("div");
c.className="cell"; c.onclick=()=>playerMove(i,c);
ttt.appendChild(c);
}}

function playerMove(i,cell){
if(boardTTT[i]||gameOver) return;
boardTTT[i]="X"; cell.textContent="‚ùå";
if(checkWin("X")){ game.classList.add("hidden"); initPath(); path.classList.remove("hidden"); return; }
if(boardTTT.every(v=>v)){ gameError.textContent="Unentschieden!"; gameError.classList.remove("hidden"); return; }
setTimeout(computerMove,400);
}

function computerMove(){
let move = smartMove();
boardTTT[move]="O";
document.querySelectorAll(".cell")[move].textContent="‚≠ï";
if(checkWin("O")){ gameError.textContent="Computer gewinnt üòà"; gameError.classList.remove("hidden"); gameOver=true; }
}

function smartMove(){
let empty=boardTTT.map((v,i)=>v==""?i:null).filter(v=>v!==null);

// 20% Zufall ‚Üí gewinnbar
if(Math.random()<0.2) return empty[Math.floor(Math.random()*empty.length)];

// Gewinnen
for(let i of empty){ boardTTT[i]="O"; if(checkWin("O")){ boardTTT[i]=""; return i;} boardTTT[i]=""; }
// Blockieren
for(let i of empty){ boardTTT[i]="X"; if(checkWin("X")){ boardTTT[i]=""; return i;} boardTTT[i]=""; }
// Mitte
if(empty.includes(4)) return 4;
return empty[Math.floor(Math.random()*empty.length)];
}

function checkWin(p){ return winLines.some(l=>l.every(i=>boardTTT[i]==p)); }

// ===================== RICHTUNGS-SPIEL =====================
let pos=4, moves=[], solution=["up","right","right","down","left"];
function initPath(){
grid.innerHTML=""; pos=4; moves=[];
for(let i=0;i<9;i++){
const d=document.createElement("div");
d.className="grid-cell"; if(i===4) d.classList.add("active");
grid.appendChild(d);
}}

function move(dir){
moves.push(dir);
let r=Math.floor(pos/3), c=pos%3;
if(dir=="up")r--; if(dir=="down")r++; if(dir=="left")c--; if(dir=="right")c++;
if(r<0||c<0||r>2||c>2) return resetPath();
pos=r*3+c; updateGrid();
if(moves.length===solution.length){
JSON.stringify(moves)==JSON.stringify(solution)
?(path.classList.add("hidden"),initMemory(),memoryGame.classList.remove("hidden"))
:resetPath();
}}

function updateGrid(){ [...grid.children].forEach(c=>c.classList.remove("active")); grid.children[pos].classList.add("active"); }
function resetPath(){ pathError.classList.remove("hidden"); initPath(); }

// ===================== MEMORY =====================
let cards=["üß≥","üß≥","‚úàÔ∏è","‚úàÔ∏è","üåç","üåç"], first=null, lock=false, matched=0;
function initMemory(){
memory.innerHTML=""; matched=0; first=null;
cards.sort(()=>Math.random()-0.5);
cards.forEach(sym=>{
const c=document.createElement("div");
c.className="card-m"; c.onclick=()=>flip(c,sym);
memory.appendChild(c);
});
}
function flip(card,sym){
if(lock||card.textContent) return;
card.textContent=sym;
if(!first){ first={card,sym}; return; }
lock=true;
setTimeout(()=>{
if(first.sym===sym){ matched+=2; if(matched===6){ memoryGame.classList.add("hidden"); unlock.classList.remove("hidden"); } }
else{ card.textContent=""; first.card.textContent=""; }
first=null; lock=false;
},700);
}

// ===================== GUTSCHEIN =====================
function showVoucher(){ unlock.classList.add("hidden"); voucher.classList.remove("hidden"); launchConfetti(); }
function launchConfetti(){ for(let i=0;i<120;i++){ const c=document.createElement("div"); c.className="confetti"; c.style.left=Math.random()*100+"vw"; c.style.backgroundColor=`hsl(${Math.random()*360},80%,60%)`; document.body.appendChild(c); setTimeout(()=>c.remove(),4000); }}

// ===================== ELEMENTE =====================
const q1=document.getElementById("q1"), q2=document.getElementById("q2"), q3=document.getElementById("q3"),
riddle=document.getElementById("riddle"), riddleError=document.getElementById("riddleError"),
game=document.getElementById("game"), gameError=document.getElementById("gameError"),
path=document.getElementById("path"), pathError=document.getElementById("pathError"),
grid=document.getElementById("grid"),
memoryGame=document.getElementById("memoryGame"), memory=document.getElementById("memory"),
unlock=document.getElementById("unlock"), voucher=document.getElementById("voucher");
</script>
</body>
</html>
