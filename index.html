<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>GeburtstagsrÃ¤tsel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color: #fff;
}
.container {
    max-width: 900px;
    margin: auto;
    padding: 40px 20px;
}
.card {
    background: rgba(255,255,255,0.08);
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.4);
    overflow: hidden;
}
.content {
    padding: 40px;
    text-align: center;
}
input {
    padding: 10px;
    border-radius: 8px;
    border: none;
    width: 220px;
    font-size: 1rem;
}
button {
    margin-top: 25px;
    padding: 14px 32px;
    font-size: 1.1rem;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    background: #ffd479;
    color: #1a2a33;
    font-weight: bold;
}
.hidden { display: none; }
.error { color: #ffb3b3; margin-top: 15px; }

.voucher-box {
    border: 2px dashed #ffffffaa;
    border-radius: 15px;
    padding: 30px;
    margin: 30px 0;
    background: rgba(0,0,0,0.25);
}
.highlight {
    font-size: 2rem;
    color: #ffd479;
    font-weight: bold;
}
.confetti {
    position: fixed;
    top: -10px;
    width: 10px;
    height: 10px;
    animation: fall 3s linear forwards;
    z-index: 9999;
}
@keyframes fall {
    to { transform: translateY(110vh) rotate(360deg); opacity: 0; }
}

/* Schachbrett */
#chessboard {
    display: grid;
    grid-template-columns: repeat(8, 50px);
    grid-template-rows: repeat(8, 50px);
    gap: 0;
    margin: 20px auto;
}
.square {
    width: 50px;
    height: 50px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size: 32px;
    cursor: pointer;
}
.square.light { background-color: #eee; color: #000; }
.square.dark { background-color: #555; color: #fff; }
.selected { outline: 3px solid yellow; }
</style>
</head>

<body>
<div class="container">
<div class="card">

<div class="content">

<!-- RÃ„TSEL -->
<div id="riddle">
    <h1>ğŸ§  GeburtstagsrÃ¤tsel</h1>
    <p>ğŸ‡§ğŸ‡« Hauptstadt von Burkina Faso?</p>
    <input id="q1"><br><br>
    <p>ğŸ‡§ğŸ‡³ Hauptstadt von Brunei?</p>
    <input id="q2"><br><br>
    <p>ğŸ‡¹ğŸ‡» Hauptstadt von Tuvalu?</p>
    <input id="q3"><br>
    <button onclick="checkRiddle()">Antworten prÃ¼fen</button>
    <div class="error hidden" id="riddleError">âŒ Leider falsch</div>
</div>

<!-- SCHACHBRETT -->
<div id="chess" class="hidden">
    <h1>â™Ÿï¸ SchachrÃ¤tsel</h1>
    <p><strong>WeiÃŸ am Zug â€“ Matt in 1!</strong></p>
    <div id="chessboard"></div>
    <div class="error hidden" id="chessError">âŒ Kein Schachmatt!</div>
</div>

<!-- UNLOCK -->
<div id="unlock" class="hidden">
    <button onclick="showVoucher()">ğŸ Gutschein einlÃ¶sen</button>
</div>

<!-- GUTSCHEIN -->
<div id="voucher" class="hidden">
    <h1>ğŸ‰ Alles Gute zum 50. Geburtstag! ğŸ‰</h1>
    <h2>Lieber Papa</h2>
    <div class="voucher-box">
        <p>Zu deinem Geburtstag bekommst du von uns:</p>
        <div class="highlight">ğŸ§³ EINEN NEUEN REISEKOFFER ğŸ§³</div>
        <p>FÃ¼r viele neue Abenteuer.</p>
    </div>
    <div id="seal" class="highlight hidden">ğŸ–ï¸ Papa ist Schachmeister!</div>
    <p>Mit ganz viel Liebe ğŸ’™<br><strong>Jonas, Emilia, Emely und Moritz</strong></p>
</div>

</div>
</div>
</div>

<script>
// ========= RÃ¤tsel =========
function n(t){return t.toLowerCase().trim();}
function checkRiddle(){
    if(n(q1.value)=="ouagadougou" &&
       n(q2.value)=="bandar seri begawan" &&
       n(q3.value)=="funafuti"){
        riddle.classList.add("hidden");
        initChess();
        chess.classList.remove("hidden");
    } else { riddleError.classList.remove("hidden"); }
}

// ========= Schach =========
let board = [];
let selectedPiece = null;

function initChess(){
    const chessboard = document.getElementById("chessboard");
    chessboard.innerHTML="";
    board = [];
    const initial = [
        ['','','','','','','',''],
        ['','','','','','','',''],
        ['','','','','','','',''],
        ['','','','','','','',''],
        ['','','','','','','',''],
        ['','','','','','','',''],
        ['','','','','','','',''],
        ['','','','','','','','']
    ];
    // Figuren: WeiÃŸ KÃ¶nig e1, Dame h5; Schwarz KÃ¶nig g8
    initial[7][4]='â™”'; // e1
    initial[3][7]='â™•'; // h5
    initial[0][6]='â™š'; // g8
    for(let r=0;r<8;r++){
        for(let c=0;c<8;c++){
            const sq = document.createElement("div");
            sq.className="square "+((r+c)%2==0?"light":"dark");
            sq.dataset.row=r;
            sq.dataset.col=c;
            sq.textContent = initial[r][c];
            sq.onclick=clickSquare;
            chessboard.appendChild(sq);
            board.push(sq);
        }
    }
}
function clickSquare(e){
    const sq=e.currentTarget;
    if(selectedPiece){
        // Move selected piece
        if(selectedPiece!==sq){
            // nur Dame oder KÃ¶nig bewegen
            const piece = selectedPiece.textContent;
            if(piece==='â™”' || piece==='â™•'){
                sq.textContent=piece;
                selectedPiece.textContent='';
                selectedPiece.classList.remove('selected');
                selectedPiece=null;
                checkMate();
            } else { selectedPiece.classList.remove('selected'); selectedPiece=null; }
        }
    } else if(sq.textContent==='â™”' || sq.textContent==='â™•'){
        selectedPiece = sq;
        sq.classList.add('selected');
    }
}
function checkMate(){
    // Richtiger Zug: Dame h5 -> h7 (Position [1][7] im Array)
    let correct=false;
    board.forEach(sq=>{
        if(sq.textContent==='â™•' && sq.dataset.row=='1' && sq.dataset.col=='7'){ correct=true; }
    });
    if(correct){
        chess.classList.add('hidden');
        unlock.classList.remove('hidden');
    } else {
        chessError.classList.remove('hidden');
    }
}

// ========= Gutschein =========
function showVoucher(){
    unlock.classList.add('hidden');
    voucher.classList.remove('hidden');
    seal.classList.remove('hidden');
    launchConfetti();
}

// ========= Konfetti =========
function launchConfetti(){
    for(let i=0;i<120;i++){
        const c=document.createElement("div");
        c.className="confetti";
        c.style.left=Math.random()*100+"vw";
        c.style.backgroundColor=`hsl(${Math.random()*360},80%,60%)`;
        document.body.appendChild(c);
        setTimeout(()=>c.remove(),4000);
    }
}

// ========= Elemente =========
const q1=document.getElementById("q1");
const q2=document.getElementById("q2");
const q3=document.getElementById("q3");
const riddle=document.getElementById("riddle");
const riddleError=document.getElementById("riddleError");
const chess=document.getElementById("chess");
const chessError=document.getElementById("chessError");
const unlock=document.getElementById("unlock");
const voucher=document.getElementById("voucher");
const seal=document.getElementById("seal");
</script>

</body>
</html>
